(this["webpackJsonpreact-todo-firebase"]=this["webpackJsonpreact-todo-firebase"]||[]).push([[0],{105:function(e,t,n){e.exports=n(161)},161:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),i=n(21),u=n.n(i),l=n(37),s=n(29),d=n.n(s),f=(n(78),n(28)),m=function(e){return{type:"LOGIN",payload:{user:e}}},p=n(26),b=n(25),O=n(70),E=n(35),g=n(16),h=n(47),j=n(19),v=n(190),y=n(202),x=n(189),k=n(60);function T(){var e=Object(b.a)(["\n  margin: 0 5px;\n"]);return T=function(){return e},e}function w(){var e=Object(b.a)(["\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"]);return w=function(){return e},e}var S=Object(j.b)(y.a)(w(),(function(e){return e.theme.palette.primary.main})),L=Object(j.b)(x.a)(T()),C=function(e){var t=e.todoList,n=e.deleteTodo,a=e.changeTodoStatus,c=e.type,o=e.updateTodo;return r.a.createElement(v.a,{container:!0,spacing:3},r.a.createElement(k.a,{onDragEnd:function(e){return function(e,t,n,a){if(e.destination){var r=e.source,c=e.destination,o=Object(g.a)(t),i=o.splice(r.index,1),u=Object(p.a)(i,1)[0];o.splice(c.index,0,u),n(o,a)}}(e,t,o,c)}},r.a.createElement(k.c,{droppableId:c},(function(e,o){return r.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,style:{opacity:o.isDraggingOver?"0.5":"1"}}),t.map((function(e,t){return console.log(e,t),r.a.createElement(k.b,{key:e.id,draggableId:e.id,index:t},(function(o,i){return r.a.createElement(S,Object.assign({ref:o.innerRef},o.draggableProps,o.dragHandleProps,{style:Object(h.a)({userSelect:"none",opacity:i.isDragging?"0.5":1},o.draggableProps.style)}),r.a.createElement(v.a,{item:!0,xs:8},e.title),r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(L,{variant:"contained",color:"primary",onClick:function(){return a(t)}},"todo"===c?"\u6e08\u307f":"\u623b\u3059"),r.a.createElement(L,{variant:"contained",color:"secondary",onClick:function(){return n(t)}},"\u524a\u9664")))}))})),e.placeholder)}))))},I=n(99),D=n.n(I),G=n(61),A=n(201),U=n(200);function B(){var e=Object(b.a)(["\n  margin: 40px auto;\n"]);return B=function(){return e},e}function P(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 0 auto;\n  > * {\n    width: 48%;\n  }\n"]);return P=function(){return e},e}function R(){var e=Object(b.a)(["\n  margin: 40px 0;\n"]);return R=function(){return e},e}var N=j.b.section(R()),F=j.b.div(P()),z=j.b.div(B()),H=function(e){var t=e.user,n=Object(a.useState)(""),c=Object(p.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)([]),f=Object(p.a)(s,2),m=f[0],b=f[1],O=Object(a.useState)([]),E=Object(p.a)(O,2),h=E[0],j=E[1],y=Object(a.useState)(!0),k=Object(p.a)(y,2),T=k[0],w=k[1],S=Object(a.useState)(!1),L=Object(p.a)(S,2),I=L[0],B=L[1],P=Object(a.useState)(!1),R=Object(p.a)(P,2),H=R[0],J=R[1],K=d.a.firestore();Object(a.useEffect)((function(){null!=t&&Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.collection("todolist").doc(t.uid).get();case 2:(n=e.sent).data().todo.tasks&&b(n.data().todo.tasks),n.data().finishedTodo.tasks&&j(n.data().finishedTodo.tasks),w(!1);case 6:case"end":return e.stop()}}),e)})))()}),[K,t]),Object(a.useEffect)((function(){null!=t&&I&&Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,K.collection("todolist").doc(t.uid);case 3:e.sent.update({todo:{tasks:m}}),w(!1);case 6:case"end":return e.stop()}}),e)})))()}),[m,I,K,t]),Object(a.useEffect)((function(){null!=t&&(H&&Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,K.collection("todolist").doc(t.uid);case 3:e.sent.update({finishedTodo:{tasks:h}}),w(!1);case 6:case"end":return e.stop()}}),e)})))(),J(!1))}),[K,h,H,t]);var M=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),o&&(B(!0),b([].concat(Object(g.a)(m),[{title:o,id:D()()}])),i(""));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(e){B(!0),b(m.filter((function(t,n){return n!==e})))},Q=function(e){J(!0),j(h.filter((function(t,n){return n!==e})))},V=function(e,t){B(!0),J(!0),"todo"===t?b(Object(g.a)(e)):"done"===t&&j(Object(g.a)(e))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{variant:"h2",component:"h1"},"TODO!!"),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{alt:t.displayName,src:t.photoURL}),r.a.createElement("p",null,t.displayName,"\u3055\u3093"),r.a.createElement("form",{onSubmit:function(e){return M(e)}},r.a.createElement(v.a,{container:!0,spacing:3},r.a.createElement(v.a,{item:!0,xs:9},r.a.createElement(U.a,{fullWidth:!0,onChange:function(e){return function(e){i(e.target.value)}(e)},value:o})),r.a.createElement(v.a,{item:!0,xs:1},r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(e){return M(e)},type:"submit"},"\u8ffd\u52a0")))),T?r.a.createElement(z,null,"loading"):r.a.createElement(F,null,r.a.createElement(N,null,r.a.createElement(G.a,{variant:"h3",component:"h2"},"TASK"),r.a.createElement(C,{todoList:m,deleteTodo:W,changeTodoStatus:function(e){B(!0),J(!0),W(e),j([].concat(Object(g.a)(h),[m.find((function(t,n){return n===e}))]))},type:"todo",updateTodo:V})),r.a.createElement(N,null,r.a.createElement(G.a,{variant:"h3",component:"h2"},"COMPLETE"),r.a.createElement(C,{todoList:h,deleteTodo:Q,changeTodoStatus:function(e){B(!0),J(!0),Q(e),b([].concat(Object(g.a)(m),[h.find((function(t,n){return n===e}))]))},type:"done",updateTodo:V})))):r.a.createElement("div",null,"loading"))},J=Object(f.b)((function(e){return{user:e.auth.user}}))(H),K=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{variant:"h2",component:"h1"},"ABOUT!!"),r.a.createElement("p",null,"\u3053\u3053\u306f\u8aac\u660e\u30da\u30fc\u30b8\u3067\u3059"))},M=n(191),W=n(192),Q=n(193),V=n(194),X=n(195),q=n(196),Y=n(197),Z=n(199);function $(){var e=Object(b.a)(["\n  width: calc(100% - 300px) !important;\n  margin-right: 0 !important;\n  margin-left: auto !important;\n"]);return $=function(){return e},e}function _(){var e=Object(b.a)(["\n  width: 260px;\n"]);return _=function(){return e},e}function ee(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  width: 100%;\n  height: 100%;\n"]);return ee=function(){return e},e}var te=j.b.div(ee()),ne=Object(j.b)(M.a)(_()),ae=Object(j.b)(W.a)($()),re=function(e){e.icon;var t=e.primary,n=e.to,a=e.onClick,c=r.a.useMemo((function(){return r.a.forwardRef((function(e,t){return r.a.createElement(O.b,Object.assign({to:n,ref:t},e))}))}),[n]);return r.a.createElement(y.a,{button:!0,component:c,onClick:a},r.a.createElement(Q.a,{primary:t}))},ce=function(e){var t=e.user,n=e.login,c=e.refLogin,o=e.logout,i=Object(a.useState)(!0),u=Object(p.a)(i,2),l=u[0],s=u[1];return Object(a.useEffect)((function(){c((function(){return s(!1)}))}),[c]),null==t?l?r.a.createElement(te,null,r.a.createElement(V.a,null)):r.a.createElement(te,null,r.a.createElement(X.a,null,r.a.createElement(q.a,null,r.a.createElement(G.a,{variant:"h3",component:"h2",color:"textSecondary",gutterBottom:!0},"TODO"),r.a.createElement(G.a,{variant:"body2",component:"p"},"Google\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002")),r.a.createElement(Y.a,{style:{justifyContent:"center"}},r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){return n()}},"Gooele Login")))):r.a.createElement(O.a,null,r.a.createElement(Z.a,{variant:"permanent",open:!0},r.a.createElement(ne,{"aria-label":"secondary mailbox folders"},r.a.createElement(y.a,{button:!0,key:"1"},r.a.createElement(re,{to:"/",primary:"TODO"})),r.a.createElement(y.a,{button:!0,key:"2"},r.a.createElement(re,{to:"/about",primary:"ABOUT"})),r.a.createElement(y.a,{button:!0,key:"3"},r.a.createElement(re,{to:"/",primary:"LOGOUT",onClick:function(){return o()}})))),r.a.createElement(ae,null,r.a.createElement(E.a,{exact:!0,path:"/"},r.a.createElement(J,null)),r.a.createElement(E.a,{path:"/about"},r.a.createElement(K,null))))},oe=Object(f.b)((function(e){return{user:e.auth.user}}),(function(e){return{login:function(){var e=new d.a.auth.GoogleAuthProvider;d.a.auth().signInWithRedirect(e)},refLogin:function(t){var n=d.a.firestore();d.a.auth().onAuthStateChanged(function(){var a=Object(l.a)(u.a.mark((function a(r){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log(r),r){a.next=4;break}return t(),a.abrupt("return",!1);case 4:return a.next=6,n.collection("todolist").doc(r.uid).get();case 6:a.sent.exists||n.collection("todolist").doc(r.uid).set({todo:{tasks:[]},finishedTodo:{tasks:[]}}),e(m(r));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},logout:function(){d.a.auth().signOut(),e({type:"LOGOUT"})}}}))(ce),ie=n(20),ue={user:null},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(h.a)({},e,{user:t.payload.user});case"LOGOUT":return Object(h.a)({},e,{user:null});default:return e}},se=Object(ie.c)({auth:le}),de=n(198),fe=n(101),me=Object(fe.a)({palette:{primary:{main:"#add8e6",dark:"#82a5b1",light:"#cfeff9"},secondary:{main:"#fbe1a9"},text:{primary:"#444444",secondary:"#757575"}}}),pe=(n(160),{apiKey:"AIzaSyBO874ssnsg1C7vS2QTd7pVgpiXea2C2H0",authDomain:"todolist-402ab.firebaseapp.com",databaseURL:"https://todolist-402ab.firebaseio.com",projectId:"todolist-402ab",storageBucket:"todolist-402ab.appspot.com",messagingSenderId:"83303513750",appId:"1:83303513750:web:c8503fcd40ba8b70554cb7"}),be=Object(ie.e)(se);d.a.initializeApp(pe),o.a.render(r.a.createElement(f.a,{store:be},r.a.createElement(de.a,{theme:me},r.a.createElement(j.a,{theme:me},r.a.createElement(oe,null)))),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.8066cda7.chunk.js.map