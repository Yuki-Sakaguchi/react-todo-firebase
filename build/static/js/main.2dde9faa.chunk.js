(this["webpackJsonpreact-todo-firebase"]=this["webpackJsonpreact-todo-firebase"]||[]).push([[0],{78:function(e,t,n){e.exports=n(98)},98:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),o=n.n(c),i=n(19),u=n.n(i),l=n(34),s=n(26),m=n.n(s),f=(n(65),n(38)),d=function(e){return{type:"LOGIN",payload:{user:e}}},p=n(29),b=n(23),E=n(56),O=n(32),h=n(25),j=n(17),v=n(127),g=n(139),y=n(126);function k(){var e=Object(b.a)(["\n  margin: 0 5px;\n"]);return k=function(){return e},e}function x(){var e=Object(b.a)(["\n  &:not(:first-child) {\n    border-top: 1px solid ",";\n  }\n"]);return x=function(){return e},e}var w=Object(j.b)(g.a)(x(),(function(e){return e.theme.palette.primary.main})),T=Object(j.b)(y.a)(k()),S=function(e){var t=e.todoList,n=e.deleteTodo,a=e.changeTodoStatus,c=e.type;return r.a.createElement(v.a,{container:!0,spacing:3},t.map((function(e,t){return r.a.createElement(w,{key:t},r.a.createElement(v.a,{item:!0,xs:8},e),r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(T,{variant:"contained",color:"primary",onClick:function(){return a(t)}},"todo"===c?"\u6e08\u307f":"\u623b\u3059"),r.a.createElement(T,{variant:"contained",color:"secondary",onClick:function(){return n(t)}},"\u524a\u9664")))})))},L=n(50),C=n(138),G=n(137);function I(){var e=Object(b.a)(["\n  margin: 40px auto;\n"]);return I=function(){return e},e}function A(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 0 auto;\n  > * {\n    width: 48%;\n  }\n"]);return A=function(){return e},e}function U(){var e=Object(b.a)(["\n  margin: 40px 0;\n"]);return U=function(){return e},e}var B=j.b.section(U()),D=j.b.div(A()),N=j.b.div(I()),R=function(e){var t=e.user,n=Object(a.useState)(""),c=Object(p.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)([]),f=Object(p.a)(s,2),d=f[0],b=f[1],E=Object(a.useState)([]),O=Object(p.a)(E,2),j=O[0],g=O[1],k=Object(a.useState)(!0),x=Object(p.a)(k,2),w=x[0],T=x[1],I=Object(a.useState)(!1),A=Object(p.a)(I,2),U=A[0],R=A[1],F=Object(a.useState)(!1),z=Object(p.a)(F,2),J=z[0],K=z[1],M=m.a.firestore();Object(a.useEffect)((function(){null!=t&&Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.collection("todolist").doc(t.uid).get();case 2:(n=e.sent).data().todo.tasks&&b(n.data().todo.tasks),n.data().finishedTodo.tasks&&g(n.data().finishedTodo.tasks),T(!1);case 6:case"end":return e.stop()}}),e)})))()}),[M,t]),Object(a.useEffect)((function(){null!=t&&U&&Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.next=3,M.collection("todolist").doc(t.uid);case 3:e.sent.update({todo:{tasks:d}}),T(!1);case 6:case"end":return e.stop()}}),e)})))()}),[d,U,M,t]),Object(a.useEffect)((function(){null!=t&&(J&&Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.next=3,M.collection("todolist").doc(t.uid);case 3:e.sent.update({finishedTodo:{tasks:j}}),T(!1);case 6:case"end":return e.stop()}}),e)})))(),K(!1))}),[M,j,J,t]);var P=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),o&&(R(!0),b([].concat(Object(h.a)(d),[o])),i(""));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(e){R(!0),b(d.filter((function(t,n){return n!==e})))},H=function(e){K(!0),g(j.filter((function(t,n){return n!==e})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{variant:"h2",component:"h1"},"TODO!!"),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{alt:t.displayName,src:t.photoURL}),r.a.createElement("p",null,t.displayName,"\u3055\u3093"),r.a.createElement("form",{onSubmit:function(e){return P(e)}},r.a.createElement(v.a,{container:!0,spacing:3},r.a.createElement(v.a,{item:!0,xs:9},r.a.createElement(G.a,{fullWidth:!0,onChange:function(e){return function(e){i(e.target.value)}(e)},value:o})),r.a.createElement(v.a,{item:!0,xs:1},r.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(e){return P(e)},type:"submit"},"\u8ffd\u52a0")))),w?r.a.createElement(N,null,"loading"):r.a.createElement(D,null,r.a.createElement(B,null,r.a.createElement(L.a,{variant:"h3",component:"h2"},"TASK"),r.a.createElement(S,{todoList:d,deleteTodo:W,changeTodoStatus:function(e){R(!0),K(!0),W(e),g([].concat(Object(h.a)(j),[d.find((function(t,n){return n===e}))]))},type:"todo"})),r.a.createElement(B,null,r.a.createElement(L.a,{variant:"h3",component:"h2"},"COMPLETE"),r.a.createElement(S,{todoList:j,deleteTodo:H,changeTodoStatus:function(e){R(!0),K(!0),H(e),b([].concat(Object(h.a)(d),[j.find((function(t,n){return n===e}))]))},type:"done"})))):r.a.createElement("div",null,"loading"))},F=Object(f.b)((function(e){return{user:e.auth.user}}))(R),z=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{variant:"h2",component:"h1"},"ABOUT!!"),r.a.createElement("p",null,"\u3053\u3053\u306f\u8aac\u660e\u30da\u30fc\u30b8\u3067\u3059"))},J=n(128),K=n(129),M=n(130),P=n(131),W=n(132),H=n(133),Q=n(134),V=n(136);function X(){var e=Object(b.a)(["\n  width: calc(100% - 300px) !important;\n  margin-right: 0 !important;\n  margin-left: auto !important;\n"]);return X=function(){return e},e}function q(){var e=Object(b.a)(["\n  width: 260px;\n"]);return q=function(){return e},e}function Y(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  width: 100%;\n  height: 100%;\n"]);return Y=function(){return e},e}var Z=j.b.div(Y()),$=Object(j.b)(J.a)(q()),_=Object(j.b)(K.a)(X()),ee=function(e){e.icon;var t=e.primary,n=e.to,a=e.onClick,c=r.a.useMemo((function(){return r.a.forwardRef((function(e,t){return r.a.createElement(E.b,Object.assign({to:n,ref:t},e))}))}),[n]);return r.a.createElement(g.a,{button:!0,component:c,onClick:a},r.a.createElement(M.a,{primary:t}))},te=function(e){var t=e.user,n=e.login,c=e.refLogin,o=e.logout,i=Object(a.useState)(!0),u=Object(p.a)(i,2),l=u[0],s=u[1];return Object(a.useEffect)((function(){c((function(){return s(!1)}))}),[c]),null==t?l?r.a.createElement(Z,null,r.a.createElement(P.a,null)):r.a.createElement(Z,null,r.a.createElement(W.a,null,r.a.createElement(H.a,null,r.a.createElement(L.a,{variant:"h3",component:"h2",color:"textSecondary",gutterBottom:!0},"TODO"),r.a.createElement(L.a,{variant:"body2",component:"p"},"Google\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002")),r.a.createElement(Q.a,{style:{justifyContent:"center"}},r.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){return n()}},"Gooele Login")))):r.a.createElement(E.a,null,r.a.createElement(V.a,{variant:"permanent",open:!0},r.a.createElement($,{"aria-label":"secondary mailbox folders"},r.a.createElement(g.a,{button:!0,key:"1"},r.a.createElement(ee,{to:"/",primary:"TODO"})),r.a.createElement(g.a,{button:!0,key:"2"},r.a.createElement(ee,{to:"/about",primary:"ABOUT"})),r.a.createElement(g.a,{button:!0,key:"3"},r.a.createElement(ee,{to:"/",primary:"LOGOUT",onClick:function(){return o()}})))),r.a.createElement(_,null,r.a.createElement(O.a,{exact:!0,path:"/"},r.a.createElement(F,null)),r.a.createElement(O.a,{path:"/about"},r.a.createElement(z,null))))},ne=Object(f.b)((function(e){return{user:e.auth.user}}),(function(e){return{login:function(){var e=new m.a.auth.GoogleAuthProvider;m.a.auth().signInWithRedirect(e)},refLogin:function(t){var n=m.a.firestore();m.a.auth().onAuthStateChanged(function(){var a=Object(l.a)(u.a.mark((function a(r){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log(r),r){a.next=4;break}return t(),a.abrupt("return",!1);case 4:return a.next=6,n.collection("todolist").doc(r.uid).get();case 6:a.sent.exists||n.collection("todolist").doc(r.uid).set({todo:{tasks:[]},finishedTodo:{tasks:[]}}),e(d(r));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},logout:function(){m.a.auth().signOut(),e({type:"LOGOUT"})}}}))(te),ae=n(37),re=n(59),ce={user:null},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(re.a)({},e,{user:t.payload.user});case"LOGOUT":return Object(re.a)({},e,{user:null});default:return e}},ie=Object(ae.b)({auth:oe}),ue=n(135),le=n(74),se=Object(le.a)({palette:{primary:{main:"#add8e6",dark:"#82a5b1",light:"#cfeff9"},secondary:{main:"#fbe1a9"},text:{primary:"#444444",secondary:"#757575"}}}),me=(n(97),{apiKey:"AIzaSyBO874ssnsg1C7vS2QTd7pVgpiXea2C2H0",authDomain:"todolist-402ab.firebaseapp.com",databaseURL:"https://todolist-402ab.firebaseio.com",projectId:"todolist-402ab",storageBucket:"todolist-402ab.appspot.com",messagingSenderId:"83303513750",appId:"1:83303513750:web:c8503fcd40ba8b70554cb7"}),fe=Object(ae.c)(ie);m.a.initializeApp(me),o.a.render(r.a.createElement(f.a,{store:fe},r.a.createElement(ue.a,{theme:se},r.a.createElement(j.a,{theme:se},r.a.createElement(ne,null)))),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.2dde9faa.chunk.js.map