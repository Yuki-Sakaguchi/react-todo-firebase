{"version":3,"sources":["pages/Todo/index.js","App.js","theme/index.js","config.js","index.js"],"names":["StyledListItem","styled","ListItem","props","theme","palette","primary","main","StyledButton","Button","Todo","todoList","deleteTodo","changeTodoStatus","type","Grid","container","spacing","map","todo","index","key","item","xs","variant","color","onClick","FixedWrapper","div","StyledSection","section","TodoContainer","Loading","App","useState","user","setUser","isNotUserCheck","setIsNotUserCheck","input","setInput","setTodoList","finishedList","setFinishedList","isLoading","setIsLoading","isChangedTodo","setIsChangedTodo","isChangedFinishedTodo","setIsChangedFinishedTodo","db","firebase","firestore","useEffect","console","log","auth","onAuthStateChanged","a","collection","doc","uid","get","exists","set","tasks","finishedTodo","resTodo","data","update","addTodo","e","preventDefault","filter","i","deleteFinishTodo","Card","CardContent","Typography","component","gutterBottom","CardActions","style","justifyContent","provider","GoogleAuthProvider","signInWithRedirect","login","CircularProgress","Container","maxWidth","Avatar","alt","displayName","src","photoURL","signOut","onSubmit","Input","fullWidth","onChange","target","value","changeInput","find","createMuiTheme","dark","light","secondary","text","Config","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","initializeApp","firebaseConfig","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ede978d5.chunk.js","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\nimport Grid from '@material-ui/core/Grid'\nimport ListItem from '@material-ui/core/ListItem'\nimport Button from '@material-ui/core/Button'\n\n// テーマを設定しているので[${props => props.theme.palette.primary.main}]こんな感じで呼び出せる\nconst StyledListItem = styled(ListItem)`\n  &:not(:first-child) {\n    border-top: 1px solid ${props => props.theme.palette.primary.main};\n  }\n`\n\nconst StyledButton = styled(Button)`\n  margin: 0 5px;\n`\n\nconst Todo = ({ todoList, deleteTodo, changeTodoStatus, type }) => {\n  return (\n    <Grid container spacing={3}>\n      {todoList.map((todo, index) => (\n        <StyledListItem key={index}>\n          <Grid item xs={8}>\n            {todo}\n          </Grid>\n          <Grid item xs={4}>\n            <StyledButton variant=\"contained\" color=\"primary\" onClick={() => changeTodoStatus(index)}>{type === 'todo' ? '済み' : '戻す'}</StyledButton>\n            <StyledButton variant=\"contained\" color=\"secondary\" onClick={() => deleteTodo(index)}>削除</StyledButton>\n          </Grid>\n        </StyledListItem>\n      ))}\n    </Grid>\n  )\n}\n\nexport default Todo","import React, { useState, useEffect } from 'react'\nimport Todo from './pages/Todo'\nimport styled from 'styled-components'\nimport { Input, Button, Container, Typography, Grid, Avatar, CircularProgress, Card, CardContent, CardActions } from '@material-ui/core';\nimport firebase from 'firebase'\nimport 'firebase/firestore'\n\nconst FixedWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  width: 100%;\n  height: 100%;\n`\n\nconst StyledSection = styled.section`\n  margin: 40px 0;\n`\n\nconst TodoContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin: 0 auto;\n  > * {\n    width: 48%;\n  }\n`;\n\nconst Loading = styled.div`\n  margin: 40px auto;\n`;\n\nconst App = () => {\n  const [user, setUser] = useState(null)\n  const [isNotUserCheck, setIsNotUserCheck] = useState(false)\n  const [input, setInput] = useState('')\n  const [todoList, setTodoList] = useState([])\n  const [finishedList, setFinishedList] = useState([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [isChangedTodo, setIsChangedTodo] = useState(false)\n  const [isChangedFinishedTodo, setIsChangedFinishedTodo] = useState(false)\n\n  const db = firebase.firestore()\n\n  // ログイン情報を元にコレクションを取得する。なければ作成する\n  useEffect(() => {\n    console.log(\"1 \" + user)\n    firebase.auth().onAuthStateChanged(async user => {\n      console.log(\"2 \" + user)\n      // 対象のコレクションがなければ作る\n      if (user != null) {\n        const collection = await db.collection('todolist').doc(user.uid).get();\n        if (!collection.exists) {\n          db.collection('todolist').doc(user.uid).set({\n            todo: {\n              tasks: []\n            },\n            finishedTodo: {\n              tasks: []\n            },\n          })\n        }\n        setIsNotUserCheck(false)\n      } else {\n        setIsNotUserCheck(true)\n      }\n      setUser(user)\n    })\n  }, [db, user])\n\n  // コレクションのデータをステータスに反映\n  useEffect(() => {\n    if (user == null) return\n    (async () => {\n      const resTodo = await db.collection('todolist').doc(user.uid).get()\n      if (resTodo.data().todo.tasks) setTodoList(resTodo.data().todo.tasks)\n      if (resTodo.data().finishedTodo.tasks) setFinishedList(resTodo.data().finishedTodo.tasks)\n      setIsLoading(false)\n    })()\n  }, [db, user])\n\n  // タスクを追加\n  useEffect(() => {\n    if (user == null) return\n    if (isChangedTodo) {\n      (async () => {\n        setIsLoading(true)\n        const docRef = await db.collection('todolist').doc(user.uid)\n        docRef.update({ todo: { tasks: todoList }})\n        setIsLoading(false)\n      })()\n    }\n  }, [todoList, isChangedTodo, db, user])\n\n  // 完了タスクを追加\n  useEffect(() => {\n    if (user == null) return\n    if (isChangedFinishedTodo) {\n      (async () => {\n        setIsLoading(true)\n        const docRef = await db.collection('todolist').doc(user.uid)\n        docRef.update({ finishedTodo: { tasks: finishedList }})\n        setIsLoading(false)\n      })()\n    }\n    setIsChangedFinishedTodo(false)\n  }, [db, finishedList, isChangedFinishedTodo, user])\n\n  const addTodo = async (e) => {\n    e.preventDefault();\n    if (!!input) {\n      setIsChangedTodo(true)\n      setTodoList([...todoList, input])\n      setInput('')\n    }\n  }\n\n  const deleteTodo = (index) => {\n    setIsChangedTodo(true)\n    setTodoList(todoList.filter((todo, i) => i !== index))\n  }\n\n  const deleteFinishTodo = (index) => {\n    setIsChangedFinishedTodo(true)\n    setFinishedList(finishedList.filter((todo, i) => i !== index))\n  }\n\n  const finishTodo = (index) => {\n    setIsChangedTodo(true)\n    setIsChangedFinishedTodo(true)\n    deleteTodo(index)\n    setFinishedList([...finishedList, todoList.find((todo, i) => i === index)])\n  }\n\n  const reopenTodo = (index) => {\n    setIsChangedTodo(true)\n    setIsChangedFinishedTodo(true)\n    deleteFinishTodo(index)\n    setTodoList([...todoList, finishedList.find((todo, i) => i === index)])\n  }\n  \n  const changeInput = (e) => {\n    setInput(e.target.value)\n  }\n\n  const login = () => {\n    const provider = new firebase.auth.GoogleAuthProvider()\n    firebase.auth().signInWithRedirect(provider)\n  }\n\n  const logout = () => {\n    firebase.auth().signOut()\n  }\n\n  // ユーザー情報がなければログインボタンを表示\n  if (user == null) {\n    if (!isNotUserCheck) {\n      return (\n        <FixedWrapper>\n          <CircularProgress />\n        </FixedWrapper>\n      )\n    } else {\n      return (\n        <FixedWrapper>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h3\" component=\"h2\" color=\"textSecondary\" gutterBottom>TODO</Typography>\n              <Typography variant=\"body2\" component=\"p\">\n                Googleアカウントでログインしてください。\n              </Typography>\n            </CardContent>\n            <CardActions style={{ justifyContent: \"center\" }}>\n              <Button variant=\"contained\" color=\"primary\" onClick={() => login()}>\n                Gooele Login\n              </Button>\n            </CardActions>\n          </Card>\n        </FixedWrapper>\n      )\n    }\n  }\n\n  // ユーザー情報があれば画面を構築\n  return (\n    <Container maxWidth=\"xl\">\n      <Typography variant=\"h2\" component=\"h1\">TODO!!</Typography>\n      <Avatar alt={user.displayName} src={user.photoURL} />\n      <p>{user.displayName}さん</p>\n      <button onClick={() => logout()}>Logout</button>\n      <form onSubmit={(e) => addTodo(e)}>\n        <Grid container spacing={3}>\n          <Grid item xs={9}>\n            <Input fullWidth={true} onChange={(e) => changeInput(e)} value={input}/>\n          </Grid>\n          <Grid item xs={1}>\n            <Button variant=\"contained\" color=\"primary\" onClick={(e) => addTodo(e)} type=\"submit\">追加</Button>\n          </Grid>\n        </Grid>\n      </form>\n      {isLoading ? (\n        <Loading>loading</Loading>\n      ) : (\n        <TodoContainer>\n          <StyledSection>\n            <Typography variant=\"h3\" component=\"h2\">TASK</Typography>\n            <Todo todoList={todoList} deleteTodo={deleteTodo} changeTodoStatus={finishTodo} type=\"todo\"/>\n          </StyledSection>\n          <StyledSection>\n            <Typography variant=\"h3\" component=\"h2\">COMPLETE</Typography>\n            <Todo todoList={finishedList} deleteTodo={deleteFinishTodo} changeTodoStatus={reopenTodo} type=\"done\"/>\n          </StyledSection>\n        </TodoContainer>\n      )}\n    </Container>\n  )\n}\n\nexport default App","/**\n * Material-uiのテーマを設定\n */\nimport { createMuiTheme } from \"@material-ui/core\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: \"#add8e6\",\n      dark: \"#82a5b1\",\n      light: \"#cfeff9\"\n    },\n    secondary: {\n      main: \"#fbe1a9\"\n    },\n    text: {\n      primary: \"#444444\",\n      secondary: \"#757575\"\n    }\n  }\n});\n\nexport default theme;","const Config = () => {\n  return {\n    firebase: {\n      apiKey: process.env.REACT_APP_API_KEY,\n      authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n      databaseURL: process.env.REACT_APP_DATABASE_URL,\n      projectId: process.env.REACT_APP_PROJECT_ID,\n      storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n      messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER,\n      appId: process.env.REACT_APP_APP_ID,\n    }\n  }\n}\n\nexport default Config().firebase","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\n// Material-uiとstyled-componentsのテーマを揃える\nimport { ThemeProvider as MaterialThemeProvider } from \"@material-ui/styles\";\nimport { ThemeProvider as StyledThemeProvider } from \"styled-components\";\nimport theme from \"./theme\";\n\n// Firebaseの設定\nimport firebase from 'firebase'\nimport 'firebase/auth'\nimport firebaseConfig from './config'\nfirebase.initializeApp(firebaseConfig);\n\nReactDOM.render(\n  <MaterialThemeProvider theme={theme}>\n    <StyledThemeProvider theme={theme}>\n      <App />\n    </StyledThemeProvider>\n  </MaterialThemeProvider>,\n  document.getElementById('root')\n)"],"sourceRoot":""}